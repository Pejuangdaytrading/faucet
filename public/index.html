<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Faucet DailyFunHub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Monetag SDK -->
  <script src='//libtl.com/sdk.js' data-zone='9748411' data-sdk='show_9748411'></script>

  <!-- Adsterra Social Bar -->
  <script type='text/javascript' src='//pl27468110.profitableratecpm.com/a6/68/b0/a668b013958e55610215c3779c508f5e.js'></script>

  <!-- hCaptcha -->
  <script src="https://js.hcaptcha.com/1/api.js" async defer></script>

  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 40px; }
    #claimBtn { padding: 10px 20px; font-size: 18px; background: green; color: white; border: none; border-radius: 6px; cursor: pointer; }
    #claimBtn:disabled { background: gray; cursor: not-allowed; }
  </style>
</head>
<body>
  <h1>🚰 DailyFunHub Faucet</h1>
  <p>Claim free <b>DOGE</b> every <b>5 minutes</b>!</p>

  <input id="wallet" type="text" placeholder="Enter FaucetPay Wallet Address" style="width:80%; padding:10px;">
  <br><br>

  <!-- Captcha widget -->
  <div class="h-captcha" data-sitekey="YOUR_HCAPTCHA_SITE_KEY"></div>
  <br>

  <button id="claimBtn" onclick="watchAd()">🎁 Claim Faucet</button>

  <p id="status"></p>

<script>
let canClaim = false;

function watchAd() {
  document.getElementById("status").innerText = "Showing ad... please wait.";
  show_9748411('pop').then(() => {
      canClaim = true;
      document.getElementById("status").innerText = "✅ Ad finished! Click again to claim.";
      document.getElementById("claimBtn").onclick = sendClaim;
  }).catch(e => {
      document.getElementById("status").innerText = "⚠️ Ad error, try again.";
  });
}

function sendClaim() {
  if (!canClaim) {
    document.getElementById("status").innerText = "❌ Please watch ad first.";
    return;
  }

  let wallet = document.getElementById("wallet").value.trim();
  let captchaToken = document.querySelector("[name='h-captcha-response']").value;

  if (wallet === "" || captchaToken === "") {
    alert("Please enter wallet & solve captcha");
    return;
  }

  document.getElementById("status").innerText = "⏳ Processing claim...";

  fetch("/api/claim", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({wallet: wallet, captcha: captchaToken})
  })
  .then(r => r.json())
  .then(res => {
    if (res.success) {
      document.getElementById("status").innerText = "🎉 Claimed! " + res.message;
    } else {
      document.getElementById("status").innerText = "❌ " + res.message;
    }
  });
}
</script>
</body>
</html>
